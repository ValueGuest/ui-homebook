"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3299],{35346:(H,E,i)=>{i.d(E,{T:()=>p});var h=i(36895),c=i(24006),_=i(60434),x=i(89383),M=i(24592),I=i(89044),T=i(56205),C=i(41226),n=i(46530),y=i(6997),l=i(10399),d=i(94650);let p=(()=>{class g{}return g.\u0275fac=function(D){return new(D||g)},g.\u0275mod=d.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=d.\u0275\u0275defineInjector({imports:[x.aw,n.u,l.G,y.u,T.P,M.V,I.Y,h.CommonModule,C.N,c.u5,_.Pc]}),g})()},33021:(H,E,i)=>{i.d(E,{P:()=>A});var h=i(36895),c=i(24006),_=i(60434),x=i(89383),M=i(56205),I=i(4100),T=i(46480),C=i(89044),n=i(94650),y=["highlightElement"],l=Object.freeze(["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"]),d="text-highlight-tag-id-";function p(t,e){return e.indices.start<t&&t<e.indices.end}function D(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}(function(){function t(e,o){this.renderer=e,this.cdr=o,this.tagCssClass="",this.tags=[],this.tagClick=new n.EventEmitter,this.tagMouseEnter=new n.EventEmitter,this.tagMouseLeave=new n.EventEmitter,this.highlightElementContainerStyle={},this.textareaEventListeners=[],this.isDestroyed=!1}t.prototype.refresh=function(){var e=this,o=getComputedStyle(this.textInputElement);l.forEach(function(r){e.highlightElementContainerStyle[r]=o[r]})},t.prototype.ngOnChanges=function(e){e.textInputElement&&this.textInputElementChanged(),(e.tags||e.tagCssClass||e.textInputValue)&&this.addTags()},t.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.textareaEventListeners.forEach(function(e){return e()})},t.prototype.onWindowResize=function(){this.refresh()},t.prototype.textInputElementChanged=function(){var e=this,o=this.textInputElement.tagName.toLowerCase();if("textarea"!==o)throw new Error("The angular-text-input-highlight component must be passed a textarea to the `textInputElement` input. Instead received a "+o);setTimeout(function(){if(!e.isDestroyed){if(e.refresh(),e.textareaEventListeners.forEach(function(u){return u()}),e.textareaEventListeners=[e.renderer.listen(e.textInputElement,"input",function(){e.addTags()}),e.renderer.listen(e.textInputElement,"scroll",function(){e.highlightElement.nativeElement.scrollTop=e.textInputElement.scrollTop,e.highlightTagElements=e.highlightTagElements.map(function(u){return u.clientRect=u.element.getBoundingClientRect(),u})}),e.renderer.listen(e.textInputElement,"mouseup",function(){e.refresh()})],e.tagClick.observers.length>0){var r=e.renderer.listen(e.textInputElement,"click",function(u){e.handleTextareaMouseEvent(u,"click")});e.textareaEventListeners.push(r)}if(e.tagMouseEnter.observers.length>0){var a=e.renderer.listen(e.textInputElement,"mousemove",function(u){e.handleTextareaMouseEvent(u,"mousemove")}),f=e.renderer.listen(e.textInputElement,"mouseleave",function(u){e.mouseHoveredTag&&(e.tagMouseLeave.emit(e.mouseHoveredTag),e.mouseHoveredTag=void 0)});e.textareaEventListeners.push(a),e.textareaEventListeners.push(f)}e.addTags()}})},t.prototype.addTags=function(){var e=this,o=typeof this.textInputValue<"u"?this.textInputValue:this.textInputElement.value,r=[],a=[];this.tags.slice().sort(function(s,m){return s.indices.start-m.indices.start}).forEach(function(s){if(s.indices.start>s.indices.end)throw new Error("Highlight tag with indices ["+s.indices.start+", "+s.indices.end+"] cannot start after it ends.");r.forEach(function(O){if(function g(t,e){return p(e.indices.start,t)||p(e.indices.end,t)}(O,s))throw new Error("Highlight tag with indices ["+s.indices.start+", "+s.indices.end+"] overlaps with tag ["+O.indices.start+", "+O.indices.end+"]")});var m=s.indices.end-s.indices.start,v=o.slice(s.indices.start,s.indices.end);if(v.length===m){var K=o.slice(r.length>0?r[r.length-1].indices.end:0,s.indices.start);a.push(D(K));var S=s.cssClass||e.tagCssClass,j=d+e.tags.indexOf(s);a.push('<span class="text-highlight-tag '+j+" "+S+'">'+D(v)+"</span>"),r.push(s)}});var u=o.slice(r.length>0?r[r.length-1].indices.end:0);a.push(D(u)),a.push("&nbsp;"),this.highlightedText=a.join(""),this.cdr.detectChanges(),this.highlightTagElements=Array.from(this.highlightElement.nativeElement.getElementsByTagName("span")).map(function(s){return{element:s,clientRect:s.getBoundingClientRect()}})},t.prototype.handleTextareaMouseEvent=function(e,o){var r=this.highlightTagElements.findIndex(function(v){return function P(t,e,o){return t.left<e&&e<t.right&&t.top<o&&o<t.bottom}(v.clientRect,e.clientX,e.clientY)});if(r>-1){var a=this.highlightTagElements[r].element,f=Array.from(a.classList).find(function(v){return v.startsWith(d)});if(f){var u=f.replace(d,""),m={tag:this.tags[+u],target:a,event:e};"click"===o?this.tagClick.emit(m):this.mouseHoveredTag||(this.mouseHoveredTag=m,this.tagMouseEnter.emit(m))}}else"mousemove"===o&&this.mouseHoveredTag&&(this.mouseHoveredTag.event=e,this.tagMouseLeave.emit(this.mouseHoveredTag),this.mouseHoveredTag=void 0)},t.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ChangeDetectorRef}]},t.propDecorators={tagCssClass:[{type:n.Input}],tags:[{type:n.Input}],textInputElement:[{type:n.Input}],textInputValue:[{type:n.Input}],tagClick:[{type:n.Output}],tagMouseEnter:[{type:n.Output}],tagMouseLeave:[{type:n.Output}],highlightElement:[{type:n.ViewChild,args:["highlightElement"]}],onWindowResize:[{type:n.HostListener,args:["window:resize"]}]},t.\u0275fac=function(o){return new(o||t)(n.\u0275\u0275directiveInject(n.Renderer2),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},t.\u0275cmp=n.\u0275\u0275defineComponent({type:t,selectors:[["mwl-text-input-highlight"]],viewQuery:function(o,r){var a;1&o&&n.\u0275\u0275viewQuery(y,5),2&o&&n.\u0275\u0275queryRefresh(a=n.\u0275\u0275loadQuery())&&(r.highlightElement=a.first)},hostBindings:function(o,r){1&o&&n.\u0275\u0275listener("resize",function(){return r.onWindowResize()},!1,n.\u0275\u0275resolveWindow)},inputs:{tagCssClass:"tagCssClass",tags:"tags",textInputElement:"textInputElement",textInputValue:"textInputValue"},outputs:{tagClick:"tagClick",tagMouseEnter:"tagMouseEnter",tagMouseLeave:"tagMouseLeave"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[1,"text-highlight-element",3,"ngStyle","innerHtml"],["highlightElement",""]],template:function(o,r){1&o&&n.\u0275\u0275element(0,"div",0,1),2&o&&n.\u0275\u0275property("ngStyle",r.highlightElementContainerStyle)("innerHtml",r.highlightedText,n.\u0275\u0275sanitizeHtml)},dependencies:[h.NgStyle],encapsulation:2})})(),function(){function t(){}t.ctorParameters=function(){return[]},t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=n.\u0275\u0275defineDirective({type:t,selectors:[["","mwlTextInputHighlightContainer",""]],hostVars:2,hostBindings:function(o,r){2&o&&n.\u0275\u0275classProp("text-input-highlight-container",!0)}})}(),function(){function t(){}t.ctorParameters=function(){return[]},t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=n.\u0275\u0275defineDirective({type:t,selectors:[["textarea","mwlTextInputElement",""]],hostVars:2,hostBindings:function(o,r){2&o&&n.\u0275\u0275classProp("text-input-element",!0)}})}();var R=function(){function t(){}return t.ctorParameters=function(){return[]},t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=n.\u0275\u0275defineInjector({imports:[h.CommonModule]}),t}(),L=i(51908),B=i(35087),W=i(78273);let A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=n.\u0275\u0275defineInjector({providers:[{provide:L.f8,useValue:"tinymce/tinymce.min.js"}],imports:[h.CommonModule,M.P,W.Y,c.u5,_.Pc,C.Y,L.Z_,T.x,B.r,I.G,R,c.UX,x.aw]}),t})()},93128:(H,E,i)=>{i.d(E,{D:()=>y});var h=i(36895),c=i(24006),_=i(60434),x=i(89383),M=i(56205),I=i(4100),T=i(89044),C=i(46480),n=i(94650);let y=(()=>{class l{}return l.\u0275fac=function(p){return new(p||l)},l.\u0275mod=n.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=n.\u0275\u0275defineInjector({imports:[h.CommonModule,M.P,c.u5,_.Pc,T.Y,I.G,c.UX,C.x,x.aw]}),l})()}}]);
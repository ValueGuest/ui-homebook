"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3807],{33807:(Ge,w,a)=>{a.r(w),a.d(w,{CalendarViewComponentModule:()=>Ne});var g=a(36895),f=a(24006),v=a(60434),y=a(34793),b=a(89383),S=a(89044),B=a(73584),I=a(56205),L=a(6997),R=a(4100),$=a(87542),N=a(2787),A=a(58284),U=a(69775),V=a(49671),u=a(28555),W=a(24040),P=a(897),m=a(76457),Y=a(36053),p=a(15439),D=a(4931),Q=a(61625),e=a(94650);const X=["mytestid"],G=["calendar"];function H(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.month)}}function Z(n,r){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Oggi"),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd())}const K=function(n,r){return{today:n,weekend:r}};function J(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275element(4,"br"),e.\u0275\u0275template(5,Z,3,0,"span",24),e.\u0275\u0275elementEnd()),2&n){const t=r.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,K,t.isToday,o.isWeekend(t.day))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.number),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.text),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isToday)}}function q(n,r){if(1&n&&e.\u0275\u0275element(0,"img",32),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275propertyInterpolate("src",t.property.guestbook.thumbnail_url,e.\u0275\u0275sanitizeUrl)}}function ee(n,r){1&n&&(e.\u0275\u0275elementStart(0,"picture"),e.\u0275\u0275element(1,"source",33)(2,"source",34)(3,"img",35),e.\u0275\u0275elementEnd())}function te(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275element(1,"ion-icon",52),e.\u0275\u0275elementEnd())}function ne(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275element(1,"ion-icon",53),e.\u0275\u0275elementEnd())}function oe(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",51),e.\u0275\u0275element(1,"ion-icon",54),e.\u0275\u0275elementEnd())}function ie(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",49),e.\u0275\u0275template(1,te,2,0,"div",50),e.\u0275\u0275template(2,ne,2,0,"div",50),e.\u0275\u0275template(3,oe,2,0,"div",50),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Airbnb"===t.res.detail.originalComingFrom),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Booking.com"===t.res.detail.originalComingFrom),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","VRBO"===t.res.detail.originalComingFrom)}}function re(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",57)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.res.detail.pax_number.adults),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"page-reservation-detail.num_adults")," ")}}function ae(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",57)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.res.detail.pax_number.children),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"page-reservation-detail.num_children")," ")}}function se(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",57)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.res.detail.pax_number.infants),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"page-reservation-detail.num_infants")," ")}}function le(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",55),e.\u0275\u0275template(1,re,5,4,"div",56),e.\u0275\u0275template(2,ae,5,4,"div",56),e.\u0275\u0275template(3,se,5,4,"div",56),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.res.detail.pax_number?null:t.res.detail.pax_number.adults)&&t.res.detail.pax_number.adults>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.res.detail.pax_number?null:t.res.detail.pax_number.children)&&t.res.detail.pax_number.children>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.res.detail.pax_number?null:t.res.detail.pax_number.infants)&&t.res.detail.pax_number.infants>0)}}function de(n,r){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"reservation.flexibility.non-refundable")))}function ce(n,r){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"reservation.flexibility.fully-refundable")))}function pe(n,r){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"reservation.flexibility.semi-refundable")))}function me(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",58),e.\u0275\u0275template(1,de,3,3,"span",24),e.\u0275\u0275template(2,ce,3,3,"span",24),e.\u0275\u0275template(3,pe,3,3,"span",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngClass",t.res.detail.flexibility),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","non-refundable"===t.res.detail.flexibility),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","fully-refundable"===t.res.detail.flexibility),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","semi-refundable"===t.res.detail.flexibility)}}const ge=function(n){return{small:n}};function ve(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.selectRes(i.res))}),e.\u0275\u0275elementStart(1,"div",39),e.\u0275\u0275template(2,ie,4,3,"div",40),e.\u0275\u0275elementStart(3,"div",41)(4,"div",42),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,le,4,3,"div",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",44),e.\u0275\u0275template(8,me,4,4,"div",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"div",46)(10,"div",47),e.\u0275\u0275element(11,"ion-icon",48),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"date"),e.\u0275\u0275pipe(15,"date"),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(14,ge,o.is1Night(t.res)))("ngStyle",o.getReservationStyle(t.res)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Airbnb"===t.res.detail.originalComingFrom||"Booking.com"===t.res.detail.originalComingFrom||"VRBO"===t.res.detail.originalComingFrom),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.res.detail.guest?t.res.detail.guest.first_name+" "+t.res.detail.guest.last_name:"No Name"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res.detail.pax_number),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.res.detail.flexibility),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind2(14,8,t.res.detail.check_in,"shortDate")," - ",e.\u0275\u0275pipeBind2(15,11,t.res.detail.check_out,"shortDate"),"")}}const ue=function(n,r,t,o,i,s){return{weekend:n,today:r,todayLess4days:t,selected:o,"selection-start":i,"selection-end":s}};function fe(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275listener("mousedown",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext().$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.startSelection(s,d.property))})("mouseover",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext().$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.updateSelection(s,d.property))})("mouseup",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(i.endSelection())}),e.\u0275\u0275template(1,ve,16,16,"div",37),e.\u0275\u0275elementEnd()}if(2&n){const t=r.$implicit,o=e.\u0275\u0275nextContext().$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction6(2,ue,i.isWeekend(t.day),t.isToday,t.isTodayLess4days,i.isSelected(t,o.property),i.isSelectionStart(t,o.property),i.isSelectionEnd(t,o.property))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res)}}function he(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"div",26)(2,"div",27),e.\u0275\u0275listener("click",function(){const s=e.\u0275\u0275restoreView(t).$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.selectProp(s.property.fbId))}),e.\u0275\u0275elementStart(3,"div",28),e.\u0275\u0275template(4,q,1,1,"img",29),e.\u0275\u0275template(5,ee,4,0,"picture",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",30),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,fe,2,9,"div",31),e.\u0275\u0275elementEnd()()}if(2&n){const t=r.$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==t.property.guestbook?null:t.property.guestbook.thumbnail_url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t.property.guestbook&&t.property.guestbook.thumbnail_url)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.property.name," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.listDays)}}const E=function(n){return{display:n}};function xe(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"div",11,12)(3,"div",13)(4,"div",14),e.\u0275\u0275element(5,"div",15),e.\u0275\u0275template(6,H,2,1,"div",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",13)(8,"div",14)(9,"div",17)(10,"div",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.addReservation())}),e.\u0275\u0275element(11,"ion-icon",19),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,J,6,7,"div",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,he,9,4,"div",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",7)(17,"div",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.back())}),e.\u0275\u0275element(18,"ion-icon",9),e.\u0275\u0275elementStart(19,"span"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"router-outlet"),e.\u0275\u0275elementEnd()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.listDaysWithReservationPerProperty[0].listDays),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("\xa0 ",e.\u0275\u0275pipeBind1(13,6,"calendar.button.newRes"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.listDaysWithReservationPerProperty[0].listDays),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.listDaysWithReservationPerProperty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,E,!!t.selectedRes||!!t.selectedProperty)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,8,"calendar-view.drawer.back"))}}let O=(()=>{class n{constructor(t,o,i,s,d,c,l,Ae,Ue,We,Ye,Qe,Xe){this.authService=t,this.activateroute=o,this.valueguestService=i,this.subscriptionService=s,this.router=d,this.store=c,this.scRes=l,this.viewCtrl=Ae,this.formBuilder=Ue,this.toastCtrl=We,this.translate=Ye,this.alertCtrl=Qe,this.location=Xe,this.selectionStart=null,this.selectionEnd=null,this.isSelecting=!1,this.isPopup=!1,this.alloggiati=!0,this.submitted=!1,this.errors=[],this.hasConsent=!0,this.success=!1,this.allogiatiwebSent=!1,this.subscriptions=[],this.days=[]}ngAfterViewInit(){}nextMonth(){}previousMonth(){}previous(){this.location.back()}ngOnInit(){this.subscriptions.push((0,Y.aj)([this.store.pipe((0,u.Ys)(m.Dy)),this.store.pipe((0,u.Ys)(m.a4))]).subscribe(([t,o])=>{this.listProperties=o,this.listReservations=t,o&&this.generateDays()}),this.store.pipe((0,u.Ys)(m.r7)).subscribe(t=>{this.selectedRes=t}),this.store.pipe((0,u.Ys)(m.Dp)).subscribe(t=>{this.selectedProperty=t}),this.store.pipe((0,u.Ys)(m.dy)).subscribe(t=>{t&&(this.user=t)}))}sortListProperties(t){return[...t].sort((o,i)=>o.name&&i.name?o.name.toLowerCase()>i.name.toLowerCase()?1:-1:0)}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}generateDays(){var t=[];for(const d of this.listProperties){var o=[];if(this.listReservations&&this.listReservations.length>0){this.startDate=p(this.listReservations[0].detail.check_in).isAfter(p())?p():p(this.listReservations[0].detail.check_in);let c=p(this.listReservations[this.listReservations.length-1].detail.check_out).add(1,"month").endOf("month"),l=this.startDate.clone();for(var i="";l.isBefore(c)||l.isSame(c,"day");){var s=this.getReservationOnDay(l,d.fbId);i=l.format("MMMM")==i?"":this.capitalizeFirstLetter(l.locale(this.translate.currentLang).format("MMMM")),o.push({isToday:l.isSame(new Date,"day"),isTodayLess4days:l.isSame(p().subtract(4,"days"),"day"),day:l.clone(),number:l.date(),text:l.format("ddd"),month:i,year:l.format("yyyy"),res:s}),i=l.format("MMMM"),l.add(1,"days")}}else{this.startDate=p();let c=p().add(1,"month").endOf("month"),l=this.startDate.clone();for(;l.isBefore(c)||l.isSame(c,"day");)s=this.getReservationOnDay(l,d.fbId),i=l.format("MMMM")==i?"":this.capitalizeFirstLetter(l.locale(this.translate.currentLang).format("MMMM")),o.push({isToday:l.isSame(new Date,"day"),day:l.clone(),number:l.date(),text:l.format("ddd"),month:i,year:l.format("yyyy"),res:null}),i=l.format("MMMM"),l.add(1,"days")}t.push({property:d,listDays:o})}this.listDaysWithReservationPerProperty=t}getReservationOnDay(t,o){return this.listReservations.find(i=>i.fbPropertyId===o&&t.isSame(i.detail.check_in,"day"))}isWeekend(t){return 0===t.day()||6===t.day()}is1Night(t){return p(t.detail.check_out).diff(p(t.detail.check_in),"days")<2}getReservationStyle(t){return t?{width:100*p(t.detail.check_out).diff(p(t.detail.check_in),"days")-20+"px"}:{}}selectRes(t){this.router.navigate([this.scRes.getStartURL()+"/calendar-view/"+t.fbPropertyId+"/"+t.detail.resId],{relativeTo:this.activateroute})}selectProp(t){this.router.navigate([this.scRes.getStartURL()+"/calendar-view/property/"+t],{relativeTo:this.activateroute})}closeDrawer(){this.location.back()}back(){this.location.back()}addReservation(){this.scRes.getStartURL(),this.openPopup(D.g,null,{isPopup:!0,isNew:!0,context:this})}hasEnoughInPlan(){return this.subscriptionService.canAddOneProperty(this.user,"concierge")}addProperty(){this.hasEnoughInPlan()?this.openPopup(Q.C,null,{context:this,product:"concierge",action:this.confirmAddProperties}):this.openPopup(W.D,null,{iconName:"vg-crown",title:this.translate.instant("missing-billing-popup.title"),subtitle:this.translate.instant("missing-billing-popup.subtitle"),buttonText:this.translate.instant("missing-billing-popup.button.goToPage"),data:{},context:this,action:this.goToSubscribePage})}confirmAddProperties(t){}goToSubscribePage(){this.router.navigate([this.scRes.getStartURL()+"/view-profile/billing"])}openPopup(t,o,i){var s=this;return(0,V.Z)(function*(){s.viewCtrl.create({component:t,componentProps:i,cssClass:["vg-modal","auto-height",o]}).then(d=>{d.onDidDismiss().then(c=>{c?.data?.success&&s.router.navigate([s.scRes.getStartURL()+"/calendar-view/"+c.data.data.propertyId+"/"+c.data.data.resId],{relativeTo:s.activateroute})}),d.present()})})()}startSelection(t,o){t.res||(this.isSelecting=!0,this.selectionStart=t,this.selectionEnd=t,this.selectedPropertyForAddReservation=o)}updateSelection(t,o){!this.isSelecting||o!==this.selectedPropertyForAddReservation||t.res||(this.selectionEnd=t)}endSelection(){this.isSelecting&&(this.isSelecting=!1,this.openNewReservationPopup(this.selectionStart,this.selectionEnd,this.selectedPropertyForAddReservation))}isSelectionStart(t,o){if(!this.selectionStart||!this.selectionEnd||o!==this.selectedPropertyForAddReservation)return!1;const i=new Date(this.selectionStart.day).getTime(),s=new Date(this.selectionEnd.day).getTime();return new Date(t.day).getTime()===Math.min(i,s)}isSelectionEnd(t,o){if(!this.selectionStart||!this.selectionEnd||o!==this.selectedPropertyForAddReservation)return!1;const i=new Date(this.selectionStart.day).getTime(),s=new Date(this.selectionEnd.day).getTime();return new Date(t.day).getTime()===Math.max(i,s)}isSelected(t,o){if(!this.selectionStart||!this.selectionEnd||o!==this.selectedPropertyForAddReservation)return!1;const i=new Date(this.selectionStart.day).getTime(),s=new Date(this.selectionEnd.day).getTime(),d=new Date(t.day).getTime();return d>=Math.min(i,s)&&d<=Math.max(i,s)}openNewReservationPopup(t,o,i){var s=t.day==o.day?o.day.clone().add(1,"days"):o.day.clone();this.openPopup(D.g,null,{isPopup:!0,isNew:!0,context:this,selectedPropertyId:i.fbId,startDate:t.day>o.day?o.day:t.day,endDate:t.day>s?t.day:s})}loadCalendarData(){}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(P.e8),e.\u0275\u0275directiveInject(y.gz),e.\u0275\u0275directiveInject(P.hZ),e.\u0275\u0275directiveInject(P.FF),e.\u0275\u0275directiveInject(y.F0),e.\u0275\u0275directiveInject(u.yh),e.\u0275\u0275directiveInject(P.BU),e.\u0275\u0275directiveInject(v.IN),e.\u0275\u0275directiveInject(f.QS),e.\u0275\u0275directiveInject(v.yF),e.\u0275\u0275directiveInject(b.sK),e.\u0275\u0275directiveInject(v.Br),e.\u0275\u0275directiveInject(g.Location))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-calendar-view"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(X,5),e.\u0275\u0275viewQuery(G,5)),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.calendar=i.first),e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(o.calendarElement=i.first)}},decls:17,vars:10,consts:[[2,"display","flex","flex-direction","column"],[2,"padding","20px"],["class","calendar",4,"ngIf"],[1,"cell-container",2,"border-bottom","0px"],[1,"firstCol",2,"padding-left","20px"],["color","","slots","start",1,"addProp",2,"margin","0",3,"click"],["name","add-circle-outline","slot","start"],[1,"drawer",3,"ngClass"],[1,"backContainer",3,"click"],["name","vg-arrow-back"],[1,"calendar"],[1,"scrollable"],["calendar",""],[1,"header"],[1,"day-container"],[1,"cell","firstCol"],["class","cell month",4,"ngFor","ngForOf"],[1,"cell","firstCol",2,"padding-left","0px","text-align","left"],[1,"addRes",3,"click"],["name","add-circle-outline",2,"vertical-align","middle"],["class","cell day borderBottom",3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"cell","month"],[1,"cell","day","borderBottom",3,"ngClass"],[4,"ngIf"],[1,"row"],[1,"cell-container"],[1,"cell","firstCol","propertyCol",3,"click"],[1,"property-thumb"],["class","property-avatar",3,"src",4,"ngIf"],[1,"propertyName"],["class","cell cellday",3,"ngClass","mousedown","mouseover","mouseup",4,"ngFor","ngForOf"],[1,"property-avatar",3,"src"],["srcset","./assets/imgs/appart-placeholder.webp 1x","type","image/webp"],["srcset","./assets/imgs/appart-placeholder.png 1x","type","image/jpeg"],["src","./assets/imgs/appart-placeholder.png",1,"property-avatar"],[1,"cell","cellday",3,"ngClass","mousedown","mouseover","mouseup"],["class","reservation-bar",3,"ngClass","ngStyle","click",4,"ngIf"],[1,"reservation-bar",3,"ngClass","ngStyle","click"],[1,"reservation-info"],["class","booking-source",4,"ngIf"],[1,"guest-info"],[1,"guest-name"],["class","guest-breakdown",4,"ngIf"],[1,"reservation-tags"],["class","flexibility-tag",3,"ngClass",4,"ngIf"],[1,"hover-details"],[1,"date-info"],["name","calendar-outline"],[1,"booking-source"],["class","logo",4,"ngIf"],[1,"logo"],["name","vg-airbnb-colored"],["name","vg-booking"],["name","vg-vrbo"],[1,"guest-breakdown"],["class","guest-category",4,"ngIf"],[1,"guest-category"],[1,"flexibility-tag",3,"ngClass"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h1",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,xe,23,12,"div",2),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"ion-button",5),e.\u0275\u0275listener("click",function(){return o.addProperty()}),e.\u0275\u0275element(8,"ion-icon",6),e.\u0275\u0275text(9,"Nuova Struttura"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7)(11,"div",8),e.\u0275\u0275listener("click",function(){return o.back()}),e.\u0275\u0275element(12,"ion-icon",9),e.\u0275\u0275elementStart(13,"span"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(16,"router-outlet"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"desktop-view.menu.calendar")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.listDaysWithReservationPerProperty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,E,!!o.selectedRes||!!o.selectedProperty)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,6,"calendar-view.drawer.back")))},dependencies:[g.NgClass,g.NgForOf,g.NgIf,g.NgStyle,v.YG,v.gu,y.lC,g.DatePipe,b.X$],styles:['.calendar[_ngcontent-%COMP%]{margin:20px}.scrollable[_ngcontent-%COMP%]{position:relative}.cell[_ngcontent-%COMP%]{border-right:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;width:100px;box-sizing:border-box;text-align:center;position:relative}.cell.firstCol[_ngcontent-%COMP%]{width:300px;font-weight:500}.cell.borderLeft[_ngcontent-%COMP%]{border-left:1px solid #ccc}.header[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]   .cell.day[_ngcontent-%COMP%]{border-right:1px solid ccc}.header[_ngcontent-%COMP%]   .cell.month[_ngcontent-%COMP%]{border:0px}.header[_ngcontent-%COMP%]   .cell.firstCol[_ngcontent-%COMP%]{border-right:1px solid #ccc;border-bottom:0px;background-color:#fff;position:sticky;z-index:2;left:0;width:300px;font-weight:500}.header[_ngcontent-%COMP%]   .borderBottom[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.weekend[_ngcontent-%COMP%]{background-color:#fdfdfd}.day-container[_ngcontent-%COMP%]{display:flex;white-space:nowrap;border-bottom:1px solid #f2f2f2}.day-container[_ngcontent-%COMP%]   .today[_ngcontent-%COMP%]{background-color:#eaeaea;font-weight:700}.month[_ngcontent-%COMP%]{text-align:left;font-weight:500}.day[_ngcontent-%COMP%]{text-align:center}.row[_ngcontent-%COMP%]{display:flex}.cell-container[_ngcontent-%COMP%]{display:flex;position:relative;border-bottom:1px solid #f2f2f2}.reservation-bar[_ngcontent-%COMP%]{cursor:pointer;background-color:#e7f0ff;border-radius:6px;position:absolute;text-align:left;padding:6px 10px;z-index:2;color:#273951;left:60px;min-height:40px;top:10px;height:70px;box-shadow:0 2px 4px #00000026;border-left:4px solid transparent;overflow:hidden;transition:all .2s ease}.reservation-bar[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0003;height:auto;min-height:90px;z-index:10}.reservation-bar[_ngcontent-%COMP%]:hover   .hover-details[_ngcontent-%COMP%]{max-height:100px;opacity:1;margin-top:8px}.reservation-bar[_ngcontent-%COMP%]:has(.flexibility-tag.fully-refundable){border-left-color:#eb445a}.reservation-bar[_ngcontent-%COMP%]:has(.flexibility-tag.non-refundable){border-left-color:#2dd36f}.reservation-bar[_ngcontent-%COMP%]:has(.flexibility-tag.semi-refundable){border-left-color:#cfa313}.reservation-bar[_ngcontent-%COMP%]   .reservation-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;height:100%}.reservation-bar[_ngcontent-%COMP%]   .booking-source[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.reservation-bar[_ngcontent-%COMP%]   .booking-source[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:16px;background:white;border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center}.reservation-bar[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding-right:24px}.reservation-bar[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]   .guest-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.reservation-bar[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]   .guest-details[_ngcontent-%COMP%]{font-size:11px;opacity:.9}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;border-radius:4px;background-color:#ffffff26;display:inline-block}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.fully-refundable[_ngcontent-%COMP%]{background-color:#eb445a40}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.non-refundable[_ngcontent-%COMP%]{background-color:#2dd36f40}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.semi-refundable[_ngcontent-%COMP%]{background-color:#ffc40940}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]{max-height:0;opacity:0;overflow:hidden;transition:all .3s ease;margin-top:0;padding-top:5px;border-top:1px solid rgba(255,255,255,.2)}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;font-size:12px}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:15px;opacity:.8}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.guest-breakdown[_ngcontent-%COMP%]{display:flex;gap:6px;margin-top:4px}.guest-breakdown[_ngcontent-%COMP%]   .guest-category[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 0;border-radius:4px;font-size:11px}.guest-breakdown[_ngcontent-%COMP%]   .guest-category[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:3px}.bookingtoolOver[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;background:white;border-radius:50%;padding:3px;border:1px solid #273951;width:23px;height:23px}.bookingtoolOver[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:15px}.bookingtoolOver[_ngcontent-%COMP%]   .other[_ngcontent-%COMP%]{font-size:11px}.propertyCol[_ngcontent-%COMP%]{border-right:1px solid #ccc;cursor:pointer;display:flex;flex-direction:row;height:90px;padding:5px 0;position:sticky;left:0;background-color:#fff;z-index:3}.propertyCol[_ngcontent-%COMP%]   .propertyName[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center;flex-direction:column;flex:1;text-align:left;font-weight:500;z-index:2;margin-left:85px}.propertyCol[_ngcontent-%COMP%]   .property-thumb[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:4px;position:absolute}.propertyCol[_ngcontent-%COMP%]   .property-thumb[_ngcontent-%COMP%]   .property-avatar[_ngcontent-%COMP%]{height:77px;width:100%;object-fit:cover;border-radius:5px}.propertyCol[_ngcontent-%COMP%]   .property-thumb[_ngcontent-%COMP%]   .property-avatar.no-avatar[_ngcontent-%COMP%]{filter:blur(2px);-webkit-filter:blur(2px)}.reservation-bar.small[_ngcontent-%COMP%]{min-width:80px}.reservation-bar.small[_ngcontent-%COMP%]:hover{width:200px!important;left:10px!important;height:auto;min-height:90px;z-index:10}.drawer[_ngcontent-%COMP%]{overflow-y:auto;padding:20px 0 10px;z-index:5;position:fixed;right:17px;width:500px;display:none;height:calc(100% - 98px);top:70px;background:white;filter:drop-shadow(0px 4px 4px rgba(0,0,0,.25))}.drawer.display[_ngcontent-%COMP%]{display:block}.backContainer[_ngcontent-%COMP%]{z-index:2;position:absolute;left:20px;top:5px;cursor:pointer;text-align:left;color:var(--text-color-primary)}.backContainer[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:relative;top:2px}.backContainer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;vertical-align:baseline;line-height:45px;margin-left:4px}.closeIcon[_ngcontent-%COMP%]{position:absolute;right:20px;cursor:pointer}.addProp[_ngcontent-%COMP%]{--background:white;color:var(--text-color-primary)}.addRes[_ngcontent-%COMP%]{border-radius:3px;padding:9px;min-width:160px;border:2px dashed #d0d0d0;display:inline-block;margin:10px 0;text-align:center;cursor:pointer}.addRes[_ngcontent-%COMP%]:hover{background-color:#f4f0ff}.cellday[_ngcontent-%COMP%]{position:relative;cursor:pointer}.cellday[_ngcontent-%COMP%]:hover:before{content:"+";position:absolute;font-size:50px;color:#5438a6;pointer-events:none;z-index:1;left:0;top:10px;bottom:10px;z-index:2;width:100%}.cellday[_ngcontent-%COMP%]:has(.reservation-bar):hover:before{display:none}.selection-overlay[_ngcontent-%COMP%]{position:absolute;border:2px dashed #5438a6;pointer-events:none;z-index:2;background-color:#5438a61a}.cell.selection-start[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;border-left:2px dashed #5438a6;border-top-left-radius:10px;border-bottom-left-radius:10px;z-index:2}.cell.selected[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;z-index:2;border-top:2px dashed #5438a6;width:100%;border-bottom:2px dashed #5438a6}.cell.selection-end[_ngcontent-%COMP%]:before{width:calc(100% - 10px);border-right:2px dashed #5438a6;border-top-right-radius:10px;border-bottom-right-radius:10px}.cell.selection-start.selection-end[_ngcontent-%COMP%]:before{width:calc(100% - 22px)}.row[_ngcontent-%COMP%]:has(.cell.selection-start)   .cell.selection-start[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selection-start)   .cell.selection-start[_ngcontent-%COMP%]:after, .row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:after, .row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:after{top:10px;bottom:10px}.row[_ngcontent-%COMP%]:has(.cell.selection-start)   .cell.selection-start[_ngcontent-%COMP%]:before{left:10px}.row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:after{right:10px}.cellday[_ngcontent-%COMP%]:hover:before{content:"+"}.cell.selected[_ngcontent-%COMP%]{background-color:#007bff33;border:none}.cell.selected[_ngcontent-%COMP%]:first-child{border-left:1px solid #007bff}.cell.selected[_ngcontent-%COMP%]:last-child{border-right:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:last-of-type{border-right:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected:first-of-type)   .cell.selected[_ngcontent-%COMP%]{border-top:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected:last-of-type)   .cell.selected[_ngcontent-%COMP%]{border-bottom:1px solid #007bff}.reservation-tooltip[_ngcontent-%COMP%], .reservation-bar[_ngcontent-%COMP%]:hover   .reservation-tooltip[_ngcontent-%COMP%]{display:none}']}),n})();var T=a(46480),k=a(57909),_e=a(98071);let M=(()=>{class n{constructor(t){this.store=t,this.subscriptions=[]}resolve(t){var o=this;return(0,V.Z)(function*(){return t.params.id&&t.params.propertyId?o.store.dispatch(new m.eX.SelectReservation(t.params.id,t.params.propertyId)):t.params.propertyId?o.store.dispatch(new m.eX.SelectProperty(t.params.propertyId)):(o.store.dispatch(new m.eX.SelectReservation(null,null)),o.store.dispatch(new m.eX.SelectProperty(null))),o.subscriptions.push(o.store.pipe((0,u.Ys)(m.Dp)).subscribe(i=>{i&&o.store.dispatch(new m.WO.UpdateGuestbook(i.guestbook))})),null})()}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(u.yh))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var Ce=a(7065),x=a(78425),F=a(57420),z=a(30049),ye=a(88886),be=a(68673),Pe=a(38793),Me=a(37305),Oe=a(93128),we=a(69998),Se=a(41228),Ie=a(92488),Re=a(53458),Ve=a(33021),De=a(16775),Ee=a(77513);let Te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[g.CommonModule,I.P,f.u5,v.Pc,S.Y,T.x,R.G,f.UX,b.aw]}),n})();var ke=a(35346),j=a(36078),Fe=a(28029),ze=a(76706),je=a(76862),_=a(55426),Be=a(78320),Le=a(94872),h=[];for(const n of je.w)if(n.component&&h.push(n.resolve?{path:n.action,component:n.component,resolve:{forMenuSelection:_.H,myData:n.resolve},data:{tab:n.tab,action:n.action}}:{path:n.action,component:n.component,resolve:{forMenuSelection:_.H},data:{tab:n.tab,action:n.action}}),n.subOptions)for(const r of n.subOptions)r.component&&h.push(r.resolve?{path:r.action,component:r.component,resolve:{forMenuSelection:_.H,myData:r.resolve},data:{action:r.action}}:{path:r.action,component:r.component,resolve:{forMenuSelection:_.H},data:{action:r.action}});h.push({path:"edit-template/:templateId",data:{action:"edit-template"},children:[{path:"",resolve:{myData:x.V},component:Be.B}]},{path:"create-contract/:contractId",data:{action:"create-contract"},children:[{path:"",resolve:{myData:x.V},component:z._}]},{path:"send-contract/:contractId",data:{action:"send-contract"},children:[{path:"",resolve:{myData:x.V},component:F.c}]});const C=[];for(const n of Ce.W)if(n.component){const r={path:n.action,component:n.component,resolve:null,data:{action:n.action}};if(n.resolve&&(r.resolve={myDate:n.resolve}),C.push(r),n.subOptions)for(const t of n.subOptions)t.component&&C.push({path:t.action,component:t.component,data:{action:t.action}})}C.push({path:"send-contract/:contractId",data:{action:"send-contract"},children:[{path:"",resolve:{myData:x.V},component:F.c}]}),C.push({path:"create-contract/:contractId",data:{action:"create-contract"},children:[{path:"",resolve:{myData:x.V},component:z._}]});const $e=[{path:"",component:O,data:{isFromCalendar:!0},resolve:{myData:M}},{path:"property/:propertyId",component:O,data:{product:"concierge"},resolve:{myData:M},children:[{path:"",component:Fe.G}].concat(h)},{path:":propertyId/:id",component:O,resolve:{myData:M},children:[{path:"",component:_e.k}].concat(C)}];let Ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[M,_.H],imports:[g.CommonModule,I.P,ye.M,k.t,N.j,$.K,T.x,U.j,ze.I,B.n,f.u5,v.Pc,R.G,f.UX,A.x,S.Y,L.u,y.Bz.forChild($e),b.aw,f.u5,v.Pc,k.t,ke.T,Te,Ee.w,De.I,Ve.P,Re.t,Ie.N,Se.d,we.S,Oe.D,Me.Q,j.j,Le.q,Pe.M,be.b,j.j]}),n})()}}]);
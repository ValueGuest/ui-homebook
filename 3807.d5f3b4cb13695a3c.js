"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3807],{33807:(at,w,r)=>{r.r(w),r.d(w,{CalendarViewComponentModule:()=>Je});var m=r(36895),u=r(24006),v=r(60434),y=r(34793),b=r(89383),S=r(89044),j=r(73584),I=r(56205),L=r(6997),V=r(4100),$=r(87542),N=r(2787),A=r(58284),U=r(69775),R=r(49671),f=r(28555),W=r(24040),P=r(897),g=r(76457),Y=r(36053),p=r(15439),D=r(4931),Q=r(61625),e=r(94650);const X=["mytestid"],G=["calendar"];function H(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",22),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.month)}}function Z(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1,"Oggi"),e.\u0275\u0275element(2,"br"),e.\u0275\u0275elementEnd())}const K=function(n,i){return{today:n,weekend:i}};function J(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275text(1),e.\u0275\u0275element(2,"br"),e.\u0275\u0275text(3),e.\u0275\u0275element(4,"br"),e.\u0275\u0275template(5,Z,3,0,"span",24),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(4,K,t.isToday,o.isWeekend(t.day))),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(t.number),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.text),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.isToday)}}function q(n,i){if(1&n&&e.\u0275\u0275element(0,"img",32),2&n){const t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275propertyInterpolate("src",t.property.guestbook.thumbnail_url,e.\u0275\u0275sanitizeUrl)}}function ee(n,i){1&n&&(e.\u0275\u0275elementStart(0,"picture"),e.\u0275\u0275element(1,"source",33)(2,"source",34)(3,"img",35),e.\u0275\u0275elementEnd())}function te(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",57),e.\u0275\u0275element(1,"ion-icon",58),e.\u0275\u0275elementEnd())}function ne(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",57),e.\u0275\u0275element(1,"ion-icon",59),e.\u0275\u0275elementEnd())}function oe(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",57),e.\u0275\u0275element(1,"ion-icon",60),e.\u0275\u0275elementEnd())}function ie(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",55),e.\u0275\u0275template(1,te,2,0,"div",56),e.\u0275\u0275template(2,ne,2,0,"div",56),e.\u0275\u0275template(3,oe,2,0,"div",56),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Airbnb"===t.res.detail.originalComingFrom),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","Booking.com"===t.res.detail.originalComingFrom),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","VRBO"===t.res.detail.originalComingFrom)}}function ae(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",63)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.res.detail.pax_number.adults),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"page-reservation-detail.num_adults")," ")}}function re(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",63)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.res.detail.pax_number.children),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"page-reservation-detail.num_children")," ")}}function le(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",63)(1,"strong"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(3).$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.res.detail.pax_number.infants),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,2,"page-reservation-detail.num_infants")," ")}}function se(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",61),e.\u0275\u0275template(1,ae,5,4,"div",62),e.\u0275\u0275template(2,re,5,4,"div",62),e.\u0275\u0275template(3,le,5,4,"div",62),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.res.detail.pax_number?null:t.res.detail.pax_number.adults)&&t.res.detail.pax_number.adults>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.res.detail.pax_number?null:t.res.detail.pax_number.children)&&t.res.detail.pax_number.children>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==t.res.detail.pax_number?null:t.res.detail.pax_number.infants)&&t.res.detail.pax_number.infants>0)}}const ce=function(){return{done:!0}};function de(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",46),e.\u0275\u0275element(1,"ion-icon",64),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction0(4,ce)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,2,"status.checkin")))}function pe(n,i){1&n&&e.\u0275\u0275element(0,"ion-icon",64)}function ge(n,i){1&n&&e.\u0275\u0275element(0,"ion-icon",65)}function me(n,i){1&n&&e.\u0275\u0275element(0,"ion-icon",66)}function ve(n,i){1&n&&e.\u0275\u0275element(0,"ion-icon",64)}function fe(n,i){1&n&&e.\u0275\u0275element(0,"ion-icon",66)}function ue(n,i){1&n&&e.\u0275\u0275element(0,"ion-icon",68)}const _e=function(n,i,t){return{done:n,todo:i,none:t}};function Ce(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",46),e.\u0275\u0275template(1,ve,1,0,"ion-icon",47),e.\u0275\u0275template(2,fe,1,0,"ion-icon",49),e.\u0275\u0275template(3,ue,1,0,"ion-icon",67),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(7,_e,t.res.istat&&t.res.istat.istatSent,t.res.istat&&!t.res.istat.istatSent,!t.res.istat)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res.istat&&t.res.istat.istatSent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res.istat&&!t.res.istat.istatSent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.res.istat),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,"status.istat"))}}function he(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"reservation.flexibility.non-refundable")))}function xe(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"reservation.flexibility.fully-refundable")))}function ye(n,i){1&n&&(e.\u0275\u0275elementStart(0,"span"),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(2,1,"reservation.flexibility.semi-refundable")))}function be(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",69),e.\u0275\u0275template(1,he,3,3,"span",24),e.\u0275\u0275template(2,xe,3,3,"span",24),e.\u0275\u0275template(3,ye,3,3,"span",24),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275property("ngClass",t.res.detail.flexibility),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","non-refundable"===t.res.detail.flexibility),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","fully-refundable"===t.res.detail.flexibility),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","semi-refundable"===t.res.detail.flexibility)}}const Pe=function(n){return{small:n}},Me=function(n,i,t){return{done:n,scheduled:i,todo:t}};function Oe(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit,l=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(l.selectRes(a.res))}),e.\u0275\u0275elementStart(1,"div",39),e.\u0275\u0275template(2,ie,4,3,"div",40),e.\u0275\u0275elementStart(3,"div",41)(4,"div",42),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,se,4,3,"div",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div",44),e.\u0275\u0275template(8,de,5,5,"div",45),e.\u0275\u0275elementStart(9,"div",46),e.\u0275\u0275template(10,pe,1,0,"ion-icon",47),e.\u0275\u0275template(11,ge,1,0,"ion-icon",48),e.\u0275\u0275template(12,me,1,0,"ion-icon",49),e.\u0275\u0275elementStart(13,"span"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(16,Ce,7,11,"div",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",50)(18,"div",51),e.\u0275\u0275template(19,be,4,4,"div",52),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",53),e.\u0275\u0275element(21,"ion-icon",54),e.\u0275\u0275elementStart(22,"span"),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"date"),e.\u0275\u0275pipe(25,"date"),e.\u0275\u0275elementEnd()()()()()}if(2&n){const t=e.\u0275\u0275nextContext().$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(23,Pe,o.is1Night(t.res)))("ngStyle",o.getReservationStyle(t.res)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","Airbnb"===t.res.detail.originalComingFrom||"Booking.com"===t.res.detail.originalComingFrom||"VRBO"===t.res.detail.originalComingFrom),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.res.detail.guest?t.res.detail.guest.first_name+" "+t.res.detail.guest.last_name:"No Name"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res.detail.pax_number),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.res.ssciFinalized),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction3(25,Me,t.res.allogiatiwebSent,t.res.allogiatiwebScheduled&&!t.res.allogiatiwebSent,!t.res.allogiatiwebSent&&!t.res.allogiatiwebScheduled)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res.allogiatiwebSent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res.allogiatiwebScheduled&&!t.res.allogiatiwebSent),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.res.allogiatiwebSent&&!t.res.allogiatiwebScheduled),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,15,"status.allogiati")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.res.istat||!t.res.istat&&t.res.ssciFinalized),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.res.detail.flexibility),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",e.\u0275\u0275pipeBind2(24,17,t.res.detail.check_in,"shortDate")," - ",e.\u0275\u0275pipeBind2(25,20,t.res.detail.check_out,"shortDate"),"")}}const we=function(n,i,t,o,a,l){return{weekend:n,today:i,todayLess4days:t,selected:o,"selection-start":a,"selection-end":l}};function Se(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275listener("mousedown",function(){const l=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.startSelection(l,c.property))})("mouseover",function(){const l=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.updateSelection(l,c.property))})("mouseup",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.endSelection())}),e.\u0275\u0275template(1,Oe,26,29,"div",37),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,o=e.\u0275\u0275nextContext().$implicit,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction6(2,we,a.isWeekend(t.day),t.isToday,t.isTodayLess4days,a.isSelected(t,o.property),a.isSelectionStart(t,o.property),a.isSelectionEnd(t,o.property))),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.res)}}function Ie(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",25)(1,"div",26)(2,"div",27),e.\u0275\u0275listener("click",function(){const l=e.\u0275\u0275restoreView(t).$implicit,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.selectProp(l.property.fbId))}),e.\u0275\u0275elementStart(3,"div",28),e.\u0275\u0275template(4,q,1,1,"img",29),e.\u0275\u0275template(5,ee,4,0,"picture",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",30),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(8,Se,2,9,"div",31),e.\u0275\u0275elementEnd()()}if(2&n){const t=i.$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",null==t.property.guestbook?null:t.property.guestbook.thumbnail_url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=t.property.guestbook&&t.property.guestbook.thumbnail_url)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.property.name," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.listDays)}}const T=function(n){return{display:n}};function Ve(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",10)(1,"div",11,12)(3,"div",13)(4,"div",14),e.\u0275\u0275element(5,"div",15),e.\u0275\u0275template(6,H,2,1,"div",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",13)(8,"div",14)(9,"div",17)(10,"div",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.addReservation())}),e.\u0275\u0275element(11,"ion-icon",19),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(14,J,6,7,"div",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(15,Ie,9,4,"div",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",7)(17,"div",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.back())}),e.\u0275\u0275element(18,"ion-icon",9),e.\u0275\u0275elementStart(19,"span"),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"translate"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.listDaysWithReservationPerProperty[0].listDays),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1("\xa0 ",e.\u0275\u0275pipeBind1(13,6,"calendar.button.newRes"),""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.listDaysWithReservationPerProperty[0].listDays),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.listDaysWithReservationPerProperty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,T,!!t.selectedRes||!!t.selectedProperty)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(21,8,"calendar-view.drawer.back"))}}let O=(()=>{class n{constructor(t,o,a,l,c,d,s,qe,et,tt,nt,ot,it){this.authService=t,this.activateroute=o,this.valueguestService=a,this.subscriptionService=l,this.router=c,this.store=d,this.scRes=s,this.viewCtrl=qe,this.formBuilder=et,this.toastCtrl=tt,this.translate=nt,this.alertCtrl=ot,this.location=it,this.selectionStart=null,this.selectionEnd=null,this.isSelecting=!1,this.isPopup=!1,this.alloggiati=!0,this.submitted=!1,this.errors=[],this.hasConsent=!0,this.success=!1,this.allogiatiwebSent=!1,this.subscriptions=[],this.days=[]}ngAfterViewInit(){}nextMonth(){}previousMonth(){}previous(){this.location.back()}ngOnInit(){this.subscriptions.push((0,Y.aj)([this.store.pipe((0,f.Ys)(g.Dy)),this.store.pipe((0,f.Ys)(g.a4))]).subscribe(([t,o])=>{this.listProperties=o,this.listReservations=t,o&&this.generateDays()}),this.store.pipe((0,f.Ys)(g.r7)).subscribe(t=>{this.selectedRes=t}),this.store.pipe((0,f.Ys)(g.Dp)).subscribe(t=>{this.selectedProperty=t}),this.store.pipe((0,f.Ys)(g.dy)).subscribe(t=>{t&&(this.user=t)}))}sortListProperties(t){return[...t].sort((o,a)=>o.name&&a.name?o.name.toLowerCase()>a.name.toLowerCase()?1:-1:0)}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}generateDays(){var t=[];for(const c of this.listProperties){var o=[];if(this.listReservations&&this.listReservations.length>0){this.startDate=p(this.listReservations[0].detail.check_in).isAfter(p())?p():p(this.listReservations[0].detail.check_in);let d=p(this.listReservations[this.listReservations.length-1].detail.check_out).add(1,"month").endOf("month"),s=this.startDate.clone();for(var a="";s.isBefore(d)||s.isSame(d,"day");){var l=this.getReservationOnDay(s,c.fbId);a=s.format("MMMM")==a?"":this.capitalizeFirstLetter(s.locale(this.translate.currentLang).format("MMMM")),o.push({isToday:s.isSame(new Date,"day"),isTodayLess4days:s.isSame(p().subtract(4,"days"),"day"),day:s.clone(),number:s.date(),text:s.format("ddd"),month:a,year:s.format("yyyy"),res:l}),a=s.format("MMMM"),s.add(1,"days")}}else{this.startDate=p();let d=p().add(1,"month").endOf("month"),s=this.startDate.clone();for(;s.isBefore(d)||s.isSame(d,"day");)l=this.getReservationOnDay(s,c.fbId),a=s.format("MMMM")==a?"":this.capitalizeFirstLetter(s.locale(this.translate.currentLang).format("MMMM")),o.push({isToday:s.isSame(new Date,"day"),day:s.clone(),number:s.date(),text:s.format("ddd"),month:a,year:s.format("yyyy"),res:null}),a=s.format("MMMM"),s.add(1,"days")}t.push({property:c,listDays:o})}this.listDaysWithReservationPerProperty=t}getReservationOnDay(t,o){return this.listReservations.find(a=>a.fbPropertyId===o&&t.isSame(a.detail.check_in,"day"))}isWeekend(t){return 0===t.day()||6===t.day()}is1Night(t){return p(t.detail.check_out).diff(p(t.detail.check_in),"days")<2}getReservationStyle(t){return t?{width:100*p(t.detail.check_out).diff(p(t.detail.check_in),"days")-20+"px"}:{}}selectRes(t){this.router.navigate([this.scRes.getStartURL()+"/calendar-view/"+t.fbPropertyId+"/"+t.detail.resId],{relativeTo:this.activateroute})}selectProp(t){this.router.navigate([this.scRes.getStartURL()+"/calendar-view/property/"+t],{relativeTo:this.activateroute})}closeDrawer(){this.location.back()}back(){this.location.back()}addReservation(){this.scRes.getStartURL(),this.openPopup(D.g,null,{isPopup:!0,isNew:!0,context:this})}hasEnoughInPlan(){return this.subscriptionService.canAddOneProperty(this.user,"concierge")}addProperty(){this.hasEnoughInPlan()?this.openPopup(Q.C,null,{context:this,product:"concierge",action:this.confirmAddProperties}):this.openPopup(W.D,null,{iconName:"vg-crown",title:this.translate.instant("missing-billing-popup.title"),subtitle:this.translate.instant("missing-billing-popup.subtitle"),buttonText:this.translate.instant("missing-billing-popup.button.goToPage"),data:{},context:this,action:this.goToSubscribePage})}confirmAddProperties(t){}goToSubscribePage(){this.router.navigate([this.scRes.getStartURL()+"/view-profile/billing"])}openPopup(t,o,a){var l=this;return(0,R.Z)(function*(){l.viewCtrl.create({component:t,componentProps:a,cssClass:["vg-modal","auto-height",o]}).then(c=>{c.onDidDismiss().then(d=>{d?.data?.success&&l.router.navigate([l.scRes.getStartURL()+"/calendar-view/"+d.data.data.propertyId+"/"+d.data.data.resId],{relativeTo:l.activateroute})}),c.present()})})()}startSelection(t,o){t.res||(this.isSelecting=!0,this.selectionStart=t,this.selectionEnd=t,this.selectedPropertyForAddReservation=o)}updateSelection(t,o){!this.isSelecting||o!==this.selectedPropertyForAddReservation||t.res||(this.selectionEnd=t)}endSelection(){this.isSelecting&&(this.isSelecting=!1,this.openNewReservationPopup(this.selectionStart,this.selectionEnd,this.selectedPropertyForAddReservation))}isSelectionStart(t,o){if(!this.selectionStart||!this.selectionEnd||o!==this.selectedPropertyForAddReservation)return!1;const a=new Date(this.selectionStart.day).getTime(),l=new Date(this.selectionEnd.day).getTime();return new Date(t.day).getTime()===Math.min(a,l)}isSelectionEnd(t,o){if(!this.selectionStart||!this.selectionEnd||o!==this.selectedPropertyForAddReservation)return!1;const a=new Date(this.selectionStart.day).getTime(),l=new Date(this.selectionEnd.day).getTime();return new Date(t.day).getTime()===Math.max(a,l)}isSelected(t,o){if(!this.selectionStart||!this.selectionEnd||o!==this.selectedPropertyForAddReservation)return!1;const a=new Date(this.selectionStart.day).getTime(),l=new Date(this.selectionEnd.day).getTime(),c=new Date(t.day).getTime();return c>=Math.min(a,l)&&c<=Math.max(a,l)}openNewReservationPopup(t,o,a){var l=t.day==o.day?o.day.clone().add(1,"days"):o.day.clone();this.openPopup(D.g,null,{isPopup:!0,isNew:!0,context:this,selectedPropertyId:a.fbId,startDate:t.day>o.day?o.day:t.day,endDate:t.day>l?t.day:l})}loadCalendarData(){}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(P.e8),e.\u0275\u0275directiveInject(y.gz),e.\u0275\u0275directiveInject(P.hZ),e.\u0275\u0275directiveInject(P.FF),e.\u0275\u0275directiveInject(y.F0),e.\u0275\u0275directiveInject(f.yh),e.\u0275\u0275directiveInject(P.BU),e.\u0275\u0275directiveInject(v.IN),e.\u0275\u0275directiveInject(u.QS),e.\u0275\u0275directiveInject(v.yF),e.\u0275\u0275directiveInject(b.sK),e.\u0275\u0275directiveInject(v.Br),e.\u0275\u0275directiveInject(m.Location))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-calendar-view"]],viewQuery:function(t,o){if(1&t&&(e.\u0275\u0275viewQuery(X,5),e.\u0275\u0275viewQuery(G,5)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.calendar=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(o.calendarElement=a.first)}},decls:17,vars:10,consts:[[2,"display","flex","flex-direction","column"],[2,"padding","20px"],["class","calendar",4,"ngIf"],[1,"cell-container",2,"border-bottom","0px"],[1,"firstCol",2,"padding-left","20px"],["color","","slots","start",1,"addProp",2,"margin","0",3,"click"],["name","add-circle-outline","slot","start"],[1,"drawer",3,"ngClass"],[1,"backContainer",3,"click"],["name","vg-arrow-back"],[1,"calendar"],[1,"scrollable"],["calendar",""],[1,"header"],[1,"day-container"],[1,"cell","firstCol"],["class","cell month",4,"ngFor","ngForOf"],[1,"cell","firstCol",2,"padding-left","0px","text-align","left"],[1,"addRes",3,"click"],["name","add-circle-outline",2,"vertical-align","middle"],["class","cell day borderBottom",3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"cell","month"],[1,"cell","day","borderBottom",3,"ngClass"],[4,"ngIf"],[1,"row"],[1,"cell-container"],[1,"cell","firstCol","propertyCol",3,"click"],[1,"property-thumb"],["class","property-avatar",3,"src",4,"ngIf"],[1,"propertyName"],["class","cell cellday",3,"ngClass","mousedown","mouseover","mouseup",4,"ngFor","ngForOf"],[1,"property-avatar",3,"src"],["srcset","./assets/imgs/appart-placeholder.webp 1x","type","image/webp"],["srcset","./assets/imgs/appart-placeholder.png 1x","type","image/jpeg"],["src","./assets/imgs/appart-placeholder.png",1,"property-avatar"],[1,"cell","cellday",3,"ngClass","mousedown","mouseover","mouseup"],["class","reservation-bar",3,"ngClass","ngStyle","click",4,"ngIf"],[1,"reservation-bar",3,"ngClass","ngStyle","click"],[1,"reservation-info"],["class","booking-source",4,"ngIf"],[1,"guest-info"],[1,"guest-name"],["class","guest-breakdown",4,"ngIf"],[1,"status-pills"],["class","status-pill",3,"ngClass",4,"ngIf"],[1,"status-pill",3,"ngClass"],["name","checkmark-circle",4,"ngIf"],["name","timer-outline",4,"ngIf"],["name","time-outline",4,"ngIf"],[1,"hover-details"],[1,"reservation-tags"],["class","flexibility-tag",3,"ngClass",4,"ngIf"],[1,"date-info"],["name","calendar-outline"],[1,"booking-source"],["class","logo",4,"ngIf"],[1,"logo"],["name","vg-airbnb-colored"],["name","vg-booking"],["name","vg-vrbo"],[1,"guest-breakdown"],["class","guest-category",4,"ngIf"],[1,"guest-category"],["name","checkmark-circle"],["name","timer-outline"],["name","time-outline"],["name","close-circle-outline",4,"ngIf"],["name","close-circle-outline"],[1,"flexibility-tag",3,"ngClass"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h1",1),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Ve,22,12,"div",2),e.\u0275\u0275elementStart(5,"div",3)(6,"div",4)(7,"ion-button",5),e.\u0275\u0275listener("click",function(){return o.addProperty()}),e.\u0275\u0275element(8,"ion-icon",6),e.\u0275\u0275text(9,"Nuova Struttura"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7)(11,"div",8),e.\u0275\u0275listener("click",function(){return o.back()}),e.\u0275\u0275element(12,"ion-icon",9),e.\u0275\u0275elementStart(13,"span"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(16,"router-outlet"),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,4,"desktop-view.menu.calendar")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.listDaysWithReservationPerProperty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,T,!!o.selectedRes||!!o.selectedProperty)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,6,"calendar-view.drawer.back")))},dependencies:[m.NgClass,m.NgForOf,m.NgIf,m.NgStyle,v.YG,v.gu,y.lC,m.DatePipe,b.X$],styles:['.calendar[_ngcontent-%COMP%]{margin:20px}.scrollable[_ngcontent-%COMP%]{position:relative}.cell[_ngcontent-%COMP%]{border-right:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;width:100px;box-sizing:border-box;text-align:center;position:relative}.cell.firstCol[_ngcontent-%COMP%]{width:300px;font-weight:500}.cell.borderLeft[_ngcontent-%COMP%]{border-left:1px solid #ccc}.header[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]   .cell.day[_ngcontent-%COMP%]{border-right:1px solid ccc}.header[_ngcontent-%COMP%]   .cell.month[_ngcontent-%COMP%]{border:0px}.header[_ngcontent-%COMP%]   .cell.firstCol[_ngcontent-%COMP%]{border-right:1px solid #ccc;border-bottom:0px;background-color:#fff;position:sticky;z-index:2;left:0;width:300px;font-weight:500}.header[_ngcontent-%COMP%]   .borderBottom[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.weekend[_ngcontent-%COMP%]{background-color:#fdfdfd}.day-container[_ngcontent-%COMP%]{display:flex;white-space:nowrap;border-bottom:1px solid #f2f2f2}.day-container[_ngcontent-%COMP%]   .today[_ngcontent-%COMP%]{background-color:#eaeaea;font-weight:700}.month[_ngcontent-%COMP%]{text-align:left;font-weight:500}.day[_ngcontent-%COMP%]{text-align:center}.row[_ngcontent-%COMP%]{display:flex}.cell-container[_ngcontent-%COMP%]{display:flex;position:relative;border-bottom:1px solid #f2f2f2}.reservation-bar[_ngcontent-%COMP%]{cursor:pointer;background-color:#e7f0ff;border-radius:6px;position:absolute;text-align:left;padding:6px 10px;z-index:2;color:#273951;left:60px;min-height:40px;top:6px;height:74px;box-shadow:0 2px 4px #00000026;border-left:4px solid transparent;overflow:hidden;transition:all .2s ease}.reservation-bar[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0003;height:auto;min-height:90px;z-index:10}.reservation-bar[_ngcontent-%COMP%]:hover   .hover-details[_ngcontent-%COMP%]{max-height:100px;opacity:1}.reservation-bar[_ngcontent-%COMP%]:has(.flexibility-tag.fully-refundable){border-left-color:#eb445a}.reservation-bar[_ngcontent-%COMP%]:has(.flexibility-tag.non-refundable){border-left-color:#2dd36f}.reservation-bar[_ngcontent-%COMP%]:has(.flexibility-tag.semi-refundable){border-left-color:#cfa313}.reservation-bar[_ngcontent-%COMP%]   .reservation-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;height:100%}.reservation-bar[_ngcontent-%COMP%]   .booking-source[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px}.reservation-bar[_ngcontent-%COMP%]   .booking-source[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:16px;background:white;border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center}.reservation-bar[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding-right:24px}.reservation-bar[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]   .guest-name[_ngcontent-%COMP%]{font-weight:500;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.reservation-bar[_ngcontent-%COMP%]   .guest-info[_ngcontent-%COMP%]   .guest-details[_ngcontent-%COMP%]{font-size:11px;opacity:.9}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]{display:flex;gap:4px;flex-wrap:wrap}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag[_ngcontent-%COMP%]{font-size:10px;padding:2px 6px;border-radius:4px;background-color:#ffffff26;display:inline-block}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.fully-refundable[_ngcontent-%COMP%]{background-color:#eb445a40}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.non-refundable[_ngcontent-%COMP%]{background-color:#2dd36f40}.reservation-bar[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.semi-refundable[_ngcontent-%COMP%]{background-color:#ffc40940}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]{max-height:0;opacity:0;overflow:hidden;transition:all .3s ease;margin-top:0;padding-top:5px;border-top:1px solid rgba(255,255,255,.2)}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px;font-size:12px}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:15px;opacity:.8}.reservation-bar[_ngcontent-%COMP%]   .hover-details[_ngcontent-%COMP%]   .date-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.guest-breakdown[_ngcontent-%COMP%]{display:flex;gap:6px;margin-top:4px}.guest-breakdown[_ngcontent-%COMP%]   .guest-category[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 0;border-radius:4px;font-size:11px}.guest-breakdown[_ngcontent-%COMP%]   .guest-category[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:3px}.bookingtoolOver[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;background:white;border-radius:50%;padding:3px;border:1px solid #273951;width:23px;height:23px}.bookingtoolOver[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:15px}.bookingtoolOver[_ngcontent-%COMP%]   .other[_ngcontent-%COMP%]{font-size:11px}.propertyCol[_ngcontent-%COMP%]{border-right:1px solid #ccc;cursor:pointer;display:flex;flex-direction:row;height:90px;padding:5px 0;position:sticky;left:0;background-color:#fff;z-index:3}.propertyCol[_ngcontent-%COMP%]   .propertyName[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center;flex-direction:column;flex:1;text-align:left;font-weight:500;z-index:2;margin-left:85px}.propertyCol[_ngcontent-%COMP%]   .property-thumb[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:4px;position:absolute}.propertyCol[_ngcontent-%COMP%]   .property-thumb[_ngcontent-%COMP%]   .property-avatar[_ngcontent-%COMP%]{height:77px;width:100%;object-fit:cover;border-radius:5px}.propertyCol[_ngcontent-%COMP%]   .property-thumb[_ngcontent-%COMP%]   .property-avatar.no-avatar[_ngcontent-%COMP%]{filter:blur(2px);-webkit-filter:blur(2px)}.reservation-bar.small[_ngcontent-%COMP%]{min-width:80px}.reservation-bar.small[_ngcontent-%COMP%]:hover{width:200px!important;left:10px!important;height:auto;min-height:90px;z-index:10}.drawer[_ngcontent-%COMP%]{overflow-y:auto;padding:20px 0 10px;z-index:5;position:fixed;right:17px;width:500px;display:none;height:calc(100% - 98px);top:70px;background:white;filter:drop-shadow(0px 4px 4px rgba(0,0,0,.25))}.drawer.display[_ngcontent-%COMP%]{display:block}.backContainer[_ngcontent-%COMP%]{z-index:2;position:absolute;left:20px;top:5px;cursor:pointer;text-align:left;color:var(--text-color-primary)}.backContainer[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:relative;top:2px}.backContainer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;vertical-align:baseline;line-height:45px;margin-left:4px}.closeIcon[_ngcontent-%COMP%]{position:absolute;right:20px;cursor:pointer}.addProp[_ngcontent-%COMP%]{--background:white;color:var(--text-color-primary)}.addRes[_ngcontent-%COMP%]{border-radius:3px;padding:9px;min-width:160px;border:2px dashed #d0d0d0;display:inline-block;margin:10px 0;text-align:center;cursor:pointer}.addRes[_ngcontent-%COMP%]:hover{background-color:#f4f0ff}.cellday[_ngcontent-%COMP%]{position:relative;cursor:pointer}.cellday[_ngcontent-%COMP%]:hover:before{content:"+";position:absolute;font-size:50px;color:#5438a6;pointer-events:none;z-index:1;left:0;top:10px;bottom:10px;z-index:2;width:100%}.cellday[_ngcontent-%COMP%]:has(.reservation-bar):hover:before{display:none}.selection-overlay[_ngcontent-%COMP%]{position:absolute;border:2px dashed #5438a6;pointer-events:none;z-index:2;background-color:#5438a61a}.cell.selection-start[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;border-left:2px dashed #5438a6;border-top-left-radius:10px;border-bottom-left-radius:10px;z-index:2}.cell.selected[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;z-index:2;border-top:2px dashed #5438a6;width:100%;border-bottom:2px dashed #5438a6}.cell.selection-end[_ngcontent-%COMP%]:before{width:calc(100% - 10px);border-right:2px dashed #5438a6;border-top-right-radius:10px;border-bottom-right-radius:10px}.cell.selection-start.selection-end[_ngcontent-%COMP%]:before{width:calc(100% - 22px)}.row[_ngcontent-%COMP%]:has(.cell.selection-start)   .cell.selection-start[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selection-start)   .cell.selection-start[_ngcontent-%COMP%]:after, .row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:after, .row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:after{top:10px;bottom:10px}.row[_ngcontent-%COMP%]:has(.cell.selection-start)   .cell.selection-start[_ngcontent-%COMP%]:before{left:10px}.row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:before, .row[_ngcontent-%COMP%]:has(.cell.selection-end)   .cell.selection-end[_ngcontent-%COMP%]:after{right:10px}.cellday[_ngcontent-%COMP%]:hover:before{content:"+"}.cell.selected[_ngcontent-%COMP%]{background-color:#007bff33;border:none}.cell.selected[_ngcontent-%COMP%]:first-child{border-left:1px solid #007bff}.cell.selected[_ngcontent-%COMP%]:last-child{border-right:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:first-of-type{border-left:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected)   .cell.selected[_ngcontent-%COMP%]:last-of-type{border-right:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected:first-of-type)   .cell.selected[_ngcontent-%COMP%]{border-top:1px solid #007bff}.row[_ngcontent-%COMP%]:has(.cell.selected:last-of-type)   .cell.selected[_ngcontent-%COMP%]{border-bottom:1px solid #007bff}.reservation-tooltip[_ngcontent-%COMP%], .reservation-bar[_ngcontent-%COMP%]:hover   .reservation-tooltip[_ngcontent-%COMP%]{display:none}.status-pills[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.status-pills[_ngcontent-%COMP%]   .status-pill[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 10px;border-radius:16px;font-size:12px;background-color:#f5f5f5;color:#666}.status-pills[_ngcontent-%COMP%]   .status-pill[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:4px;font-size:14px}.status-pills[_ngcontent-%COMP%]   .status-pill.done[_ngcontent-%COMP%]{background-color:#f6ffed;color:#52c41a}.status-pills[_ngcontent-%COMP%]   .status-pill.done[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#52c41a}.status-pills[_ngcontent-%COMP%]   .status-pill.scheduled[_ngcontent-%COMP%]{background-color:#f2fafe;color:#1890ff}.status-pills[_ngcontent-%COMP%]   .status-pill.scheduled[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#1890ff}.status-pills[_ngcontent-%COMP%]   .status-pill.todo[_ngcontent-%COMP%]{background-color:#fff7e6;color:#fa8c16}.status-pills[_ngcontent-%COMP%]   .status-pill.todo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fa8c16}.status-pills[_ngcontent-%COMP%]   .status-pill.none[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#999}.status-pills[_ngcontent-%COMP%]   .status-pill.none[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#999}.reservation-info[_ngcontent-%COMP%]   .guest-breakdown[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}.reservation-info[_ngcontent-%COMP%]   .guest-breakdown[_ngcontent-%COMP%]   .guest-category[_ngcontent-%COMP%]{font-size:11px;color:#666}.reservation-info[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]{margin-bottom:6px}.reservation-info[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag[_ngcontent-%COMP%]{display:inline-block;font-size:11px;padding:2px 6px;border-radius:4px}.reservation-info[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.fully-refundable[_ngcontent-%COMP%]{background-color:#eb445a26;color:#eb445a}.reservation-info[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.non-refundable[_ngcontent-%COMP%]{background-color:#2dd36f26;color:#2dd36f}.reservation-info[_ngcontent-%COMP%]   .reservation-tags[_ngcontent-%COMP%]   .flexibility-tag.semi-refundable[_ngcontent-%COMP%]{background-color:#ffc40926;color:#cc9f0c}']}),n})();var k=r(46480),E=r(57909),Re=r(98071);let M=(()=>{class n{constructor(t){this.store=t,this.subscriptions=[]}resolve(t){var o=this;return(0,R.Z)(function*(){return t.params.id&&t.params.propertyId?o.store.dispatch(new g.eX.SelectReservation(t.params.id,t.params.propertyId)):t.params.propertyId?o.store.dispatch(new g.eX.SelectProperty(t.params.propertyId)):(o.store.dispatch(new g.eX.SelectReservation(null,null)),o.store.dispatch(new g.eX.SelectProperty(null))),o.subscriptions.push(o.store.pipe((0,f.Ys)(g.Dp)).subscribe(a=>{a&&o.store.dispatch(new g.WO.UpdateGuestbook(a.guestbook))})),null})()}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(f.yh))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac}),n})();var De=r(7065),C=r(78425),F=r(57420),z=r(30049),Te=r(88886),ke=r(68673),Ee=r(38793),Fe=r(37305),ze=r(93128),Be=r(69998),je=r(41228),Le=r(92488),$e=r(53458),Ne=r(33021),Ae=r(16775),Ue=r(77513);let We=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.CommonModule,I.P,u.u5,v.Pc,S.Y,k.x,V.G,u.UX,b.aw]}),n})();var Ye=r(35346),B=r(36078),Qe=r(28029),Xe=r(76706),Ge=r(76862),h=r(55426),He=r(78320),Ze=r(94872),_=[];for(const n of Ge.w)if(n.component&&_.push(n.resolve?{path:n.action,component:n.component,resolve:{forMenuSelection:h.H,myData:n.resolve},data:{tab:n.tab,action:n.action}}:{path:n.action,component:n.component,resolve:{forMenuSelection:h.H},data:{tab:n.tab,action:n.action}}),n.subOptions)for(const i of n.subOptions)i.component&&_.push(i.resolve?{path:i.action,component:i.component,resolve:{forMenuSelection:h.H,myData:i.resolve},data:{action:i.action}}:{path:i.action,component:i.component,resolve:{forMenuSelection:h.H},data:{action:i.action}});_.push({path:"edit-template/:templateId",data:{action:"edit-template"},children:[{path:"",resolve:{myData:C.V},component:He.B}]},{path:"create-contract/:contractId",data:{action:"create-contract"},children:[{path:"",resolve:{myData:C.V},component:z._}]},{path:"send-contract/:contractId",data:{action:"send-contract"},children:[{path:"",resolve:{myData:C.V},component:F.c}]});const x=[];for(const n of De.W)if(n.component){const i={path:n.action,component:n.component,resolve:null,data:{action:n.action}};if(n.resolve&&(i.resolve={myDate:n.resolve}),x.push(i),n.subOptions)for(const t of n.subOptions)t.component&&x.push({path:t.action,component:t.component,data:{action:t.action}})}x.push({path:"send-contract/:contractId",data:{action:"send-contract"},children:[{path:"",resolve:{myData:C.V},component:F.c}]}),x.push({path:"create-contract/:contractId",data:{action:"create-contract"},children:[{path:"",resolve:{myData:C.V},component:z._}]});const Ke=[{path:"",component:O,data:{isFromCalendar:!0},resolve:{myData:M}},{path:"property/:propertyId",component:O,data:{product:"concierge"},resolve:{myData:M},children:[{path:"",component:Qe.G}].concat(_)},{path:":propertyId/:id",component:O,resolve:{myData:M},children:[{path:"",component:Re.k}].concat(x)}];let Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({providers:[M,h.H],imports:[m.CommonModule,I.P,Te.M,E.t,N.j,$.K,k.x,U.j,Xe.I,j.n,u.u5,v.Pc,V.G,u.UX,A.x,S.Y,L.u,y.Bz.forChild(Ke),b.aw,u.u5,v.Pc,E.t,Ye.T,We,Ue.w,Ae.I,Ne.P,$e.t,Le.N,je.d,Be.S,ze.D,Fe.Q,B.j,Ze.q,Ee.M,ke.b,B.j]}),n})()}}]);